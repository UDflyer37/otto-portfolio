<html><head><base href="https://ottoportfolio.anvil.app/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Challenge 3: Binary Buster</title>
<style>
    body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f4f4f4;
    }
    h1, h2 {
        color: #2c3e50;
    }
    pre {
        background-color: #ecf0f1;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
    }
    .warning {
        background-color: #ffeb3b;
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 20px;
    }
    #keyInput {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
    }
    #submitKey, #downloadCode {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        margin-right: 10px;
    }
    #submitKey:hover, #downloadCode:hover {
        background-color: #2980b9;
    }
    #result {
        margin-top: 20px;
        font-weight: bold;
    }
</style>
</head>
<body>
    <h1>Challenge 3: Binary Buster</h1>
    
    <div class="warning">
        <strong>Note:</strong> This is a simulated challenge. In a real CTF, you would download and analyze an actual binary file.
    </div>

    <h2>Challenge Description</h2>
    <p>Your task is to reverse engineer the provided C code and find the correct key to unlock the flag.</p>

    <h2>Key Submission</h2>
    <input type="text" id="keyInput" placeholder="Enter the key">
    <button id="submitKey">Submit Key</button>
    <button id="downloadCode">Download C Code</button>

    <div id="result"></div>

    <h2>C Code (Simulated)</h2>
    <pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main() {
    char input[50];
    printf("Enter the key: ");
    scanf("%s", input);
    
    if (strcmp(input, KEY) == 0) {
        printf("Correct! The flag is: %s\n", FLAG);
    } else {
        printf("Incorrect key. Try again.\n");
    }
    return 0;
}
    </pre>

    <script>
    document.getElementById('submitKey').addEventListener('click', function() {
        var key = document.getElementById('keyInput').value;
        var result = document.getElementById('result');
        
        if (key === "betty") {
            result.textContent = "Correct! The flag is: i_need_gopherchucks";
            result.style.color = "green";
        } else {
            result.textContent = "Incorrect key. Try again.";
            result.style.color = "red";
        }
    });

    document.getElementById('downloadCode').addEventListener('click', function() {
        var cCode = `
#include <stdio.h>
#include <string.h>
#include <curl/curl.h>

// Obfuscation function that generates the key
void generate_key(char *key) {
    key[0] = 'd' - 1;
    key[1] = 'f' - 1;
    key[2] = 'u' - 1;
    key[3] = 'u' - 1;
    key[4] = 'z' - 1;
    key[5] = '\0';
}

// Function to send the key to an external server for validation
int validate_key(char *key) {
    CURL *curl;
    CURLcode res;
    int is_valid = 0;
    
    // Initialize CURL
    curl = curl_easy_init();
    if(curl) {
        char post_data[50];
        sprintf(post_data, "key=%s", key);  // Sending key as POST data

        // Set the URL of the validation server
        curl_easy_setopt(curl, CURLOPT_URL, "https://your-server.com/validate");

        // Set the POST data
        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, post_data);

        // Perform the request and check the result
        res = curl_easy_perform(curl);
        if(res == CURLE_OK) {
            printf("Server validation succeeded!\n");
            is_valid = 1;
        } else {
            printf("Server validation failed: %s\n", curl_easy_strerror(res));
        }

        // Cleanup
        curl_easy_cleanup(curl);
    }
    
    return is_valid;
}

int main() {
    char input[100];
    char correct_key[6]; // The obfuscated key (generated)

    // Generate the correct key
    generate_key(correct_key);

    // Prompt user for input
    printf("Enter the secret key: ");
    scanf("%s", input);

    // Validate the key with the server
    if (strcmp(input, correct_key) == 0) {
        if (validate_key(correct_key)) {
            printf("Correct! The flag will be sent by the server.\n");
        } else {
            printf("Server validation failed.\n");
        }
    } else {
        printf("Incorrect key. Try again.\n");
    }

    return 0;
}`;
        
        var blob = new Blob([cCode], {type: "text/plain"});
        var url = URL.createObjectURL(blob);
        var a = document.createElement("a");
        a.href = url;
        a.download = "challenge3.c";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    });
    </script>

</body>
</html>
